{"version":3,"sources":["scripts/main.js"],"names":["score","document","querySelector","gameScore","gameMassedge","number","messageCon","querySelectorAll","className","replace","random","Math","round","meaning","meaningRendom","additionTwoFour","cells","getElementsByClassName","resuktGL","getElementsByTagName","filter","x","innerText","length","twoFour","randomCells","textContent","setTimeout","sortArrayUD","arrayTag","arrayTagNew","k","children","sortArrayUDV","sortArrayLR","reversArray","result","map","cell","reverse","sortL","i","left","Number","tabNew","tbodyNew","createElement","innerHTML","c","td","join","tbody","table","remove","append","addEventListener","e","target","tagName","forEach","tr","resultArray","key"],"mappings":"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","file":"main.295241e7.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst score = document.querySelector('.game-score');\r\nlet gameScore = 0;\r\n\r\n// сообщения в игре\r\nfunction gameMassedge(number) {\r\n  const messageCon = document.querySelectorAll('.message');\r\n\r\n  switch (number) {\r\n    case 0:\r\n      messageCon[0].className = messageCon[0].className.replace('hidden', '');\r\n      messageCon[1].className = messageCon[1].className + ' ' + 'hidden';\r\n      messageCon[2].className = messageCon[2].className + ' ' + 'hidden';\r\n\r\n      return;\r\n    case 1:\r\n      messageCon[0].className = messageCon[0].className + ' ' + 'hidden';\r\n      messageCon[1].className = messageCon[1].className.replace('hidden', '');\r\n      messageCon[2].className = messageCon[2].className + ' ' + 'hidden';\r\n\r\n      return;\r\n\r\n    default:\r\n      messageCon[0].className = messageCon[0].className + ' ' + 'hidden';\r\n      messageCon[1].className = messageCon[1].className + ' ' + 'hidden';\r\n      messageCon[2].className = messageCon[2].className + ' ' + 'hidden';\r\n  }\r\n}\r\n\r\n// рандомное значение\r\nfunction random() {\r\n  return Math.round(Math.random() * 15);\r\n}\r\n\r\n// значение 2 или 4 (10%)\r\nfunction meaning() {\r\n  const meaningRendom = Math.random() * 100;\r\n\r\n  if (meaningRendom <= 10) {\r\n    return 4;\r\n  }\r\n\r\n  return 2;\r\n}\r\n\r\n// функция заполнения пустых ячеек\r\nfunction additionTwoFour() {\r\n  const cells = document.getElementsByClassName('field-cell');\r\n  const td = document.getElementsByTagName('td');\r\n\r\n  const resuktGL = [...td].filter(x => x.innerText === '');\r\n\r\n  if (resuktGL.length === 0) {\r\n    gameMassedge(0);\r\n\r\n    return;\r\n  }\r\n\r\n  const twoFour = meaning();\r\n  let randomCells = random();\r\n\r\n  while (cells[randomCells].textContent) {\r\n    randomCells = random();\r\n  }\r\n\r\n  setTimeout(() => {\r\n    cells[randomCells].textContent = twoFour;\r\n    // eslint-disable-next-line max-len\r\n    cells[randomCells].className = 'field-cell' + ' ' + 'field-cell--' + twoFour;\r\n  }, 100);\r\n}\r\n\r\n// старт/рестaрт игры\r\ndocument.addEventListener('click', (e) => {\r\n  if (e.target.tagName !== 'BUTTON') {\r\n    return;\r\n  }\r\n\r\n  additionTwoFour();\r\n  additionTwoFour();\r\n\r\n  switch (e.target.innerText) {\r\n    case 'Start':\r\n      e.target.innerText = 'Restart';\r\n      e.target.className = e.target.className.replace('start', 'restart');\r\n      gameMassedge();\r\n\r\n      return;\r\n    case 'Restart':\r\n      const td = document.querySelectorAll('td');\r\n\r\n      td.forEach(x => {\r\n        x.innerText = '';\r\n        x.className = 'field-cell';\r\n      });\r\n      document.querySelector('.game-score').innerText = '0';\r\n      gameMassedge();\r\n  }\r\n});\r\n\r\n// преобразование массива для вверх /вниз\r\nfunction sortArrayUD(arrayTag) {\r\n  const arrayTagNew = [[], [], [], []];\r\n\r\n  for (let k = 0; k < 4; k++) {\r\n    arrayTagNew[0][k] = (arrayTag[k].children[0]);\r\n    arrayTagNew[1][k] = (arrayTag[k].children[1]);\r\n    arrayTagNew[2][k] = (arrayTag[k].children[2]);\r\n    arrayTagNew[3][k] = (arrayTag[k].children[3]);\r\n  }\r\n\r\n  return arrayTagNew;\r\n}\r\n\r\n// преобразование массива для вверх /вниз  ввозврат\r\nfunction sortArrayUDV(arrayTag) {\r\n  const arrayTagNew = [[], [], [], []];\r\n\r\n  for (let k = 0; k < 4; k++) {\r\n    arrayTagNew[0][k] = (arrayTag[k][0]);\r\n    arrayTagNew[1][k] = (arrayTag[k][1]);\r\n    arrayTagNew[2][k] = (arrayTag[k][2]);\r\n    arrayTagNew[3][k] = (arrayTag[k][3]);\r\n  }\r\n\r\n  return arrayTagNew;\r\n}\r\n\r\n// преобразование массива для право влево\r\nfunction sortArrayLR(arrayTag) {\r\n  const arrayTagNew = [[], [], [], []];\r\n\r\n  for (let k = 0; k < 4; k++) {\r\n    arrayTagNew[k][0] = (arrayTag[k].children[0]);\r\n    arrayTagNew[k][1] = (arrayTag[k].children[1]);\r\n    arrayTagNew[k][2] = (arrayTag[k].children[2]);\r\n    arrayTagNew[k][3] = (arrayTag[k].children[3]);\r\n  }\r\n\r\n  return arrayTagNew;\r\n}\r\n\r\n// ревеверс массива\r\nfunction reversArray(arrayTag) {\r\n  const result = [...arrayTag].map(cell => cell.reverse());\r\n\r\n  return result;\r\n}\r\n\r\n// сдвигание массива\r\nfunction sortL(cell) {\r\n  for (let k = 0; k < 3; k++) {\r\n    for (let i = 0; i < 3; i++) {\r\n      if (!cell[i].innerText) {\r\n        cell[i].innerText = cell[i + 1].innerText;\r\n        cell[i + 1].innerText = '';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// суммирование массива\r\nfunction left(arrayTag) {\r\n  const result = [...arrayTag].map(cell => {\r\n    sortL(cell);\r\n\r\n    for (let i = 0; i < 3; i++) {\r\n      // eslint-disable-next-line max-len\r\n      if (cell[i].innerText === cell[i + 1].innerText && cell[i].innerText !== '') {\r\n        cell[i].innerText = Number(cell[i + 1].innerText) * 2;\r\n        cell[i + 1].innerText = '';\r\n        gameScore += Number(cell[i].innerText);\r\n        score.innerText = gameScore;\r\n\r\n        if (gameScore === 2048) {\r\n          gameMassedge(1);\r\n\r\n          return;\r\n        }\r\n        i++;\r\n      }\r\n    }\r\n\r\n    sortL(cell);\r\n\r\n    return cell;\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\n// вставка новой таблицы\r\nfunction tabNew(arrayTag) {\r\n  const tbodyNew = document.createElement('tbody');\r\n\r\n  // eslint-disable-next-line max-len\r\n  tbodyNew.innerHTML = arrayTag.map(c => `<tr class=\"field-row\">${c.map(td => `<td class=\"field-cell${td.innerText === '' ? '' : (' field-cell--' + td.innerText)}\">${td.innerText}</td>`).join('')}</tr>`).join('');\r\n\r\n  const tbody = document.querySelector('tbody');\r\n  const table = document.querySelector('.game-field');\r\n\r\n  tbody.remove();\r\n  table.append(tbodyNew);\r\n}\r\n\r\n// обработка нажатия стрелок вправо влево\r\ndocument.addEventListener('keydown', (e) => {\r\n  const tr = document.getElementsByTagName('tr');\r\n  let trArray;\r\n  let resultArray;\r\n\r\n  switch (e.key) {\r\n    case 'ArrowLeft':\r\n      trArray = sortArrayLR(tr);\r\n      resultArray = left(trArray);\r\n\r\n      tabNew(resultArray);\r\n\r\n      additionTwoFour();\r\n      break;\r\n    case 'ArrowRight':\r\n      trArray = sortArrayLR(tr);\r\n\r\n      resultArray = left(reversArray(trArray));\r\n\r\n      tabNew(reversArray(resultArray));\r\n\r\n      additionTwoFour();\r\n\r\n      break;\r\n    case 'ArrowDown':\r\n      trArray = sortArrayUD(tr);\r\n      resultArray = left(reversArray(trArray));\r\n\r\n      tabNew(sortArrayUDV(reversArray(resultArray)));\r\n\r\n      additionTwoFour();\r\n\r\n      break;\r\n    case 'ArrowUp':\r\n      trArray = sortArrayUD(tr);\r\n      resultArray = left(trArray);\r\n\r\n      tabNew(sortArrayUDV(resultArray));\r\n\r\n      additionTwoFour();\r\n\r\n      break;\r\n  };\r\n});\r\n"]}